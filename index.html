<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<style>
    .vdp-datepicker__calendar .cell.highlighted {
        background: #4bd;
    }
</style>
<div id="app">
    <app inline-template>
        <eddbk-wizard></eddbk-wizard>
    </app>
</div>
<script type="text/x-template" id="eddbk-wizard-template">
    <div class="edd-booking-wizard">
        <form-wizard :title="_('Book an Appointment')"
                     subtitle=""
                     :nextButtonText="_('Next')"
                     :backButtonText="_('Back')"
                     :finishButtonText="_('Finish')"
        >
            <tab-content :before-change="canSwitchFromServiceTab">
                <service-step v-model="service"></service-step>
            </tab-content>
            <tab-content :before-change="canSwitchFromSessionTab">
                <session-step v-model="session" :service="service"></session-step>
            </tab-content>
            <tab-content>
                <confirmation-step v-model="notes" :service="service" :session="session"></confirmation-step>
            </tab-content>

            <template slot="footer" scope="{activeTabIndex, prevTab, isLastStep, nextTab, fillButtonStyle}">
                <!--<div class="wizard-footer-left" v-if="selectedService && props.activeTabIndex === 0">-->
                <!--<div>{{ serviceInfo.pricePreview }}</div>-->
                <!--<div style="opacity: .6" v-if="serviceInfo.isOtherSessionsAvailable">-->
                <!--{{ _('More appointment durations available in the next step.') }}-->
                <!--</div>-->
                <!--</div>-->

                <!--<div class="wizard-footer-clear" v-if="selectedSession && props.activeTabIndex === 2">-->
                <!--{{ sessionInfo }}-->
                <!--{{ $_('Click Add to cart to continue.') }}-->
                <!--</div>-->

                <!--<div class="wizard-footer-clear" style="color: red" v-if="errorMessage">-->
                <!--{{ errorMessage }}-->
                <!--</div>-->

                <div class="wizard-footer-right">
                    <!--&& !props.isLastStep-->
                    <wizard-button v-if="activeTabIndex > 0"
                                   @click.native="prevTab()"
                                   class="wizard-footer-back"
                                   :style="fillButtonStyle">
                        {{ _('Back') }}
                    </wizard-button>

                    <wizard-button @click.native="isLastStep ? createBooking() : nextTab()"
                                   :class="['wizard-footer-right', isLastStep ? 'finish-button' : '']"
                                   :style="fillButtonStyle"
                                   :disabled="isCreatingBooking ? 'disabled' : false"
                    >{{ isLastStep ? _('Book Now') : _('Next') }}</wizard-button>
                </div>
            </template>
        </form-wizard>
    </div>
</script>
<script type="text/x-template" id="eddbk-confirmation-step-template">
<div>
    <div class="service-info">
        <p>{{ _('You are booking:') }} <strong>{{ service.name }}</strong> - {{ appointment.duration }}</p>
        <p>{{ _('Starting at') }} <strong>{{ appointment.start }}</strong></p>
        <p>{{ _('The price is of') }} <strong>{{ appointment.price }}</strong></p>
    </div>
</div>
</script>
<script type="text/x-template" id="eddbk-session-step-template">
<div>
    <div class="edd-booking-wizard__info">
        {{ _('You are booking a ') }} <strong>{{ service.name }}</strong>
    </div>
    <service-session-selector :service="service" v-model="valueProxy"></service-session-selector>
</div>
</script>
<script type="text/x-template" id="eddbk-service-step-template">
    <div>
        <div class="inline-form-control">
            <label>
                {{ _('Select a service') }}
                <span class="eddbk-loading-inline" v-if="isLoading" style="margin-left: 3px"></span>
            </label>
            <select v-model="valueProxy" class="eddb-control" :disabled="isLoading ? 'disabled' : false">
                <option :value="null" disabled selected>{{ _('Select option') }}</option>
                <option :value="item" v-for="item in services">{{ item.name }}</option>
            </select>
        </div>
        <div class="service">
            <div v-if="value" class="service__image">
                <img :src="value.imageSrc" alt="">
            </div>
            <div v-if="value" class="service__description">
                {{ value.description }}
            </div>
        </div>
    </div>
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // get default configuration inside the Bottle instance
    require.config({
      paths: {
        cjs: 'https://rawgit.com/guybedford/cjs/master/cjs',
        'amd-loader': 'https://rawgit.com/guybedford/amd-loader/master/amd-loader',
        stdLib: 'https://unpkg.com/@rebelcode/std-lib@0.1.4/dist/std-lib.umd',
        bottle: 'https://cdnjs.cloudflare.com/ajax/libs/bottlejs/1.6.1/bottle.min',
        vue: 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.4/vue',
        bookingWizardComponents: 'https://unpkg.com/@rebelcode/booking-wizard-components@0.1.2/dist/lib.min',
        axios: 'https://cdn.jsdelivr.net/npm/axios@0.18.0/dist/axios.min',
        humanizeDuration: 'https://cdnjs.cloudflare.com/ajax/libs/humanize-duration/3.14.0/humanize-duration.min',
        uiFramework: 'https://unpkg.com/@rebelcode/ui-framework@0.1.1/dist/static/js/uiFramework',
        datepicker: 'https://cdn.jsdelivr.net/npm/vuejs-datepicker@0.9.26/dist/build.min',
        lodash: 'https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min',
        moment: 'https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.17/moment-timezone-with-data-2012-2022.min',
        momentRange: 'https://cdnjs.cloudflare.com/ajax/libs/moment-range/4.0.1/moment-range',
      }
    })

    var dependenciesList = ['bookingWizardComponents', 'uiFramework', 'bottle', 'vue', 'axios', 'humanizeDuration', 'cjs!datepicker',
      'moment', 'lodash', 'cjs!momentRange', 'stdLib']

    function defineServices (di, dependencies) {
      di.factory('vue', function () {
        var Vue = dependencies.vue
        Vue.use(dependencies.uiFramework.Core.InjectedComponents)
        return Vue
      })

      di.factory('app', function () {
        return {
          inject: ['eddbk-wizard'],
          data: function () {
            return {
              //...
            }
          },
          components: {
            'eddbk-wizard': 'eddbk-wizard',
          }
        }
      })

      di.factory('config', function () {
        return {
          // ...
        }
      })

      di.factory('document', function () {
        return document
      })

      di.factory('selectorList', function () {
        return [
          '#app',
        ]
      })
    }

    require(dependenciesList, function () {
      var dependencies = {}
      for (var i = 0; i < dependenciesList.length; i++) {
        dependencies[dependenciesList[i].replace('cjs!', '')] = arguments[i]
      }
      var di = new dependencies.bottle()

      defineServices(di, dependencies)
      var container = new dependencies.uiFramework.Container.Container(di)
      var app = new dependencies.uiFramework.Core.App(container)
      app.init()
    })
  })
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
</body>
</html>